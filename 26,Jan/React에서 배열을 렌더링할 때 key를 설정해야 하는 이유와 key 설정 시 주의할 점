map() 호출 내부의 JSX 엘리먼트에는 항상 key가 필요합니다!

Key는 각 컴포넌트가 어떤 배열 항목에 해당하는지 React에 알려주어 나중에 일치시킬 수 있도록 합니다. 이는 배열 항목이 정렬 등으로 인해 이동하거나 삽입되거나 삭제될 수 있는 경우 중요해집니다. key를 잘 선택하면 React가 정확히 무슨 일이 일어났는지 추론하고 DOM 트리에 올바르게 업데이트 하는데 도움이 됩니다.

즉석에서 key를 생성하는 대신 데이터 안에 key를 포함해야 합니다

key를 가져오는 곳 
데이터 소스마다 다른 key 소스를 제공합니다

데이터베이스의 데이터: 데이터베이스에서 데이터를 가져오는 경우 본질적으로 고유한 데이터베이스 key/ID를 사용할 수 있습니다.
로컬에서 생성된 데이터: 데이터가 로컬에서 생성되고 유지되는 경우(예: 메모 작성 앱의 노트), 항목을 만들 때 증분 일련번호나 crypto.randomUUID() 또는 uuid 같은 패키지를 사용하세요.
key 규칙 
key는 형제 간에 고유해야 합니다. 하지만 같은 key를 다른 배열의 JSX 노드에 동일한 key로 사용해도 괜찮습니다.
key는 변경되어서는 안 되며 그렇게 되면 key는 목적에 어긋납니다! 렌더링 중에는 key를 생성하지 마세요.

React에 key가 필요한 이유는 무엇인가요? 
데스크탑의 파일에 이름이 없다고 상상해 보세요. 대신 첫 번째 파일, 두 번째 파일 등 순서대로 파일을 참조할 것입니다. 익숙해질 수도 있지만, 파일을 삭제한다면 혼란스러워질 수도 있습니다. 두 번째 파일이 첫 번째 파일이 되고 세 번째 파일이 두 번째 파일이 되는 식으로 말이죠.

폴더의 파일 이름과 배열의 JSX key는 비슷한 용도로 사용됩니다. 이를 통해 형제 항목 간에 항목을 고유하게 식별할 수 있습니다. 잘 선택된 key는 배열 내 위치보다 더 많은 정보를 제공합니다. 재정렬로 인해 위치가 변경되더라도 key는 React가 생명주기 내내 해당 항목을 식별할 수 있게 해줍니다.

- 인덱스 값을 key 값으로 설정하지 않기.
배열에서 항목의 인덱스를 key로 사용하고 싶을 수도 있습니다. 실제로 key를 전혀 지정하지 않으면 React는 인덱스를 사용합니다. 하지만 항목이 삽입되거나 삭제하거나 배열의 순서가 바뀌면 시간이 지남에 따라 항목을 렌더링하는 순서가 변경됩니다. 인덱스를 key로 사용하면 버그가 발생합니다.

- key값을 실제 데이터 안에 있는 값으로 설정하기.
마찬가지로 key={Math.random()}처럼 즉석에서 key를 생성하지 마세요. 이렇게 하면 렌더링 간에 key가 일치하지 않아 모든 컴포넌트와 DOM이 매번 다시 생성될 수 있습니다. 속도가 느려질 뿐만 아니라 리스트 항목 내부의 모든 사용자의 입력도 손실됩니다. 대신 데이터 기반의 안정적인 ID를 사용하세요.

- key값은 prop로 전달하지 않는다.
컴포넌트가 key를 prop으로 받지 않는다는 점에 유의하세요. key는 React 자체에서 힌트로만 사용됩니다. 컴포넌트에 ID가 필요하다면 <Profile key={id} userId={id} />와 같이 별도의 prop으로 전달해야 합니다.

왜?
key값은 props로 전달해야하는 값이 아니다. key값은 요소를 구분하기 위한 값이다. 컴포넌트 자체의 값으로 취급하지 않고 react 내부에서 React가 reconciliation(재조정)할 때 쓰는 힌트
재조정: 리렌더링 과정중 일어나는 일.렌더링 과정 중에,React가 이전 결과와 비교해서 컴포넌트의 정체성과 재사용 여부를 판단하는 단계가 재조정

```
상태 변경
  ↓
리렌더링 (JSX 다시 계산)
  ↓
재조정 (이전 트리와 비교, key 사용)
  ↓
커밋 (실제 DOM 변경)
```

![img](https://velog.velcdn.com/images/foreveryejin/post/060d5e0c-a349-4a2e-af4b-be7df82bbaf3/image.png)
